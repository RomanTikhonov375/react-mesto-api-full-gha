{"ast":null,"code":"import _objectSpread from\"C:/Users/Roman/dev/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useContext,useEffect}from\"react\";import PopupWithForm from\"./PopupWithForm.jsx\";import{CurrentUserContext}from'../../src/context/CurrentUserContext';import{useForm}from'react-hook-form';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditProfilePopup(props){var currentUser=useContext(CurrentUserContext);var _useForm=useForm({mode:'onChange'}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isDirty=_useForm$formState.isDirty,isValid=_useForm$formState.isValid,clearErrors=_useForm.clearErrors,reset=_useForm.reset,setValue=_useForm.setValue;var nameRegister=register('name',{required:{value:true,message:'Обязательное поле'},minLength:{value:2,message:'Минимальное число символов : 2'},maxLength:{value:40,message:'Максимальное число символов: 40'}});var aboutRegister=register('about',{required:{value:true,message:'Обязательное поле'},minLength:{value:2,message:'Минимальное число символов : 2'},maxLength:{value:40,message:'Максимальное число символов: 200'}});useEffect(function(){reset();setValue(\"name\",currentUser.name);setValue(\"about\",currentUser.about);},[currentUser,props.isOpen]);function handleSubmitForm(data){props.onUpdateUser({name:data.name,about:data.about});}function handleClose(){props.onClose();clearErrors(['name','about']);}return/*#__PURE__*/_jsxs(PopupWithForm,{buttonText:!props.isLoading?'Сохранить':'Сохранение...',isDirty:isDirty,isValid:isValid,onSubmit:handleSubmit(handleSubmitForm),title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",name:\"edit-profile\",isOpen:props.isOpen,onClose:handleClose,children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",className:\"popup__input popup__input_type_name\",id:\"user-name\",name:\"name\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u0438\\u043C\\u044F\"},nameRegister)),/*#__PURE__*/_jsx(\"span\",{id:\"card-link-error\",className:\"popup__input-error \".concat(errors.name?'popup__input-error_active':''),children:errors.name?errors.name.message:''}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",className:\"popup__input popup__input_type_career\",id:\"user-career\",name:\"about\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u043F\\u0440\\u0438\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"},aboutRegister)),/*#__PURE__*/_jsx(\"span\",{id:\"card-link-error\",className:\"popup__input-error \".concat(errors.about?'popup__input-error_active':''),children:errors.about?errors.about.message:''})]});}","map":{"version":3,"names":["React","useState","useContext","useEffect","PopupWithForm","CurrentUserContext","useForm","jsx","_jsx","jsxs","_jsxs","EditProfilePopup","props","currentUser","_useForm","mode","register","handleSubmit","_useForm$formState","formState","errors","isDirty","isValid","clearErrors","reset","setValue","nameRegister","required","value","message","minLength","maxLength","aboutRegister","name","about","isOpen","handleSubmitForm","data","onUpdateUser","handleClose","onClose","buttonText","isLoading","onSubmit","title","children","_objectSpread","type","className","id","placeholder","concat"],"sources":["C:/Users/Roman/dev/react-mesto-api-full-gha/frontend/src/components/EditProfilePopup.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm.jsx\";\r\nimport { CurrentUserContext } from '../../src/context/CurrentUserContext';\r\nimport { useForm } from 'react-hook-form'\r\n\r\nexport default function EditProfilePopup(props) {\r\n\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    const {register, handleSubmit, formState:{ errors, isDirty, isValid }, clearErrors,reset, setValue} = useForm({mode: 'onChange'});\r\n\r\n    const nameRegister = register('name', {\r\n      required: {\r\n        value: true,\r\n        message: 'Обязательное поле'\r\n      },\r\n      minLength: {\r\n        value: 2,\r\n        message: 'Минимальное число символов : 2'\r\n      },\r\n      maxLength: {\r\n        value: 40,\r\n        message: 'Максимальное число символов: 40'\r\n      }\r\n    })\r\n\r\n    const aboutRegister = register('about', {\r\n        required: {\r\n            value: true,\r\n            message: 'Обязательное поле'\r\n          },\r\n          minLength: {\r\n            value: 2,\r\n            message: 'Минимальное число символов : 2'\r\n          },\r\n          maxLength: {\r\n            value: 40,\r\n            message: 'Максимальное число символов: 200'\r\n          }\r\n    })\r\n\r\n\r\n    useEffect(() => {\r\n        reset()\r\n        setValue(\"name\", currentUser.name)\r\n        setValue(\"about\", currentUser.about)\r\n    }, [currentUser, props.isOpen]);\r\n\r\n\r\n    function handleSubmitForm(data) {\r\n        props.onUpdateUser({\r\n            name: data.name,\r\n            about: data.about\r\n        });\r\n    }\r\n\r\n    function handleClose() {\r\n        props.onClose();\r\n        clearErrors(['name','about'])\r\n    }\r\n\r\n \r\n\r\n    return (\r\n        <PopupWithForm\r\n            buttonText={!props.isLoading ? 'Сохранить' : 'Сохранение...'}\r\n            isDirty={isDirty}\r\n            isValid={isValid}\r\n            onSubmit={handleSubmit(handleSubmitForm)}\r\n            title=\"Редактировать профиль\"\r\n            name=\"edit-profile\"\r\n            isOpen={props.isOpen}\r\n            onClose={handleClose}\r\n        >\r\n            <input type=\"text\" className=\"popup__input popup__input_type_name\" id=\"user-name\" name=\"name\"\r\n                placeholder=\"Введите ваше имя\" {...nameRegister} />\r\n            <span id=\"card-link-error\" className={`popup__input-error ${errors.name ? 'popup__input-error_active' : ''}`}>{errors.name ? errors.name.message: ''}</span>\r\n            <input type=\"text\" className=\"popup__input popup__input_type_career\" id=\"user-career\" name=\"about\"\r\n                placeholder=\"Введите ваше призвание\" {...aboutRegister} />\r\n            <span id=\"card-link-error\" className={`popup__input-error ${errors.about ? 'popup__input-error_active' : ''}`}>{errors.about ? errors.about.message: ''}</span>\r\n        </PopupWithForm>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}