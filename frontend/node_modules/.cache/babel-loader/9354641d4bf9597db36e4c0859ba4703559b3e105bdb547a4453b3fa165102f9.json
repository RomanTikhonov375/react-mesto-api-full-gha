{"ast":null,"code":"import _objectSpread from\"C:/Users/Roman/dev/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from\"react\";import PopupWithForm from\"./PopupWithForm.jsx\";import{useForm}from'react-hook-form';import{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditAvatarPopup(props){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isDirty=_useForm$formState.isDirty,isValid=_useForm$formState.isValid,clearErrors=_useForm.clearErrors,reset=_useForm.reset;var linkRegister=register('link',{pattern:{value:/^[(http(s)?):\\/\\/(www\\.)?a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/,message:'Тут должна быть ссылка'},required:{value:true,message:'Обязательное поле'}});var handleSubmitForm=function handleSubmitForm(data){props.onUpdateAvatar(data.link);};function handleClose(){props.onClose();}useEffect(function(){clearErrors('link');reset({'link':''});},[props.isOpen]);return/*#__PURE__*/_jsxs(PopupWithForm,{isDirty:isDirty,isValid:isValid,buttonText:!props.isLoading?'Сохранить':'Сохранение...',onSubmit:handleSubmit(handleSubmitForm),isOpen:props.isOpen,onClose:handleClose,title:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",name:\"edit-avatar\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"url\",className:\"popup__input popup__input_type_link\",id:\"card-avatar-link\",name:\"link\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\"},linkRegister)),/*#__PURE__*/_jsx(\"span\",{id:\"card-link-error\",className:\"popup__input-error \".concat(errors.link?'popup__input-error_active':''),children:errors.link?errors.link.message:''})]});}","map":{"version":3,"names":["React","PopupWithForm","useForm","useEffect","jsx","_jsx","jsxs","_jsxs","EditAvatarPopup","props","_useForm","register","handleSubmit","_useForm$formState","formState","errors","isDirty","isValid","clearErrors","reset","linkRegister","pattern","value","message","required","handleSubmitForm","data","onUpdateAvatar","link","handleClose","onClose","isOpen","buttonText","isLoading","onSubmit","title","name","children","_objectSpread","type","className","id","placeholder","concat"],"sources":["C:/Users/Roman/dev/react-mesto-api-full-gha/frontend/src/components/EditAvatarPopup.jsx"],"sourcesContent":["import React from \"react\"\r\nimport PopupWithForm from \"./PopupWithForm.jsx\"\r\nimport { useForm } from 'react-hook-form'\r\nimport { useEffect } from \"react\";\r\n\r\n\r\nexport default function EditAvatarPopup(props) {\r\n\r\n  const { register, handleSubmit, formState: { errors, isDirty, isValid }, clearErrors, reset } = useForm();\r\n\r\n\r\n  const linkRegister = register('link', {\r\n    pattern: {\r\n      value: /^[(http(s)?):\\/\\/(www\\.)?a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/,\r\n      message: 'Тут должна быть ссылка'\r\n    },\r\n    required: {\r\n      value: true,\r\n      message: 'Обязательное поле'\r\n    }\r\n  })\r\n\r\n\r\n  const handleSubmitForm = (data) => {\r\n    props.onUpdateAvatar(data.link);\r\n  }\r\n\r\n  function handleClose() {\r\n    props.onClose();\r\n\r\n  }\r\n\r\n  useEffect(() => {\r\n    clearErrors('link')\r\n    reset({ 'link': '' })\r\n  }, [props.isOpen])\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isDirty={isDirty}\r\n      isValid={isValid}\r\n      buttonText={!props.isLoading ? 'Сохранить' : 'Сохранение...'}\r\n      onSubmit={handleSubmit(handleSubmitForm)}\r\n      isOpen={props.isOpen}\r\n      onClose={handleClose}\r\n      title=\"Обновить аватар\"\r\n      name=\"edit-avatar\"\r\n    >\r\n      <input type=\"url\" className=\"popup__input popup__input_type_link\" id=\"card-avatar-link\" name=\"link\"\r\n        placeholder=\"Ссылка на картинку\" {...linkRegister} />\r\n      <span id=\"card-link-error\" className={`popup__input-error ${errors.link ? 'popup__input-error_active' : ''}`}>{errors.link ? errors.link.message : ''}</span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n"],"mappings":"yIAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,aAAa,KAAM,qBAAqB,CAC/C,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAGlC,cAAe,SAAS,CAAAC,eAAeA,CAACC,KAAK,CAAE,CAE7C,IAAAC,QAAA,CAAgGR,OAAO,CAAC,CAAC,CAAjGS,QAAQ,CAAAD,QAAA,CAARC,QAAQ,CAAEC,YAAY,CAAAF,QAAA,CAAZE,YAAY,CAAAC,kBAAA,CAAAH,QAAA,CAAEI,SAAS,CAAIC,MAAM,CAAAF,kBAAA,CAANE,MAAM,CAAEC,OAAO,CAAAH,kBAAA,CAAPG,OAAO,CAAEC,OAAO,CAAAJ,kBAAA,CAAPI,OAAO,CAAIC,WAAW,CAAAR,QAAA,CAAXQ,WAAW,CAAEC,KAAK,CAAAT,QAAA,CAALS,KAAK,CAG3F,GAAM,CAAAC,YAAY,CAAGT,QAAQ,CAAC,MAAM,CAAE,CACpCU,OAAO,CAAE,CACPC,KAAK,CAAE,iGAAiG,CACxGC,OAAO,CAAE,wBACX,CAAC,CACDC,QAAQ,CAAE,CACRF,KAAK,CAAE,IAAI,CACXC,OAAO,CAAE,mBACX,CACF,CAAC,CAAC,CAGF,GAAM,CAAAE,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIC,IAAI,CAAK,CACjCjB,KAAK,CAACkB,cAAc,CAACD,IAAI,CAACE,IAAI,CAAC,CACjC,CAAC,CAED,QAAS,CAAAC,WAAWA,CAAA,CAAG,CACrBpB,KAAK,CAACqB,OAAO,CAAC,CAAC,CAEjB,CAEA3B,SAAS,CAAC,UAAM,CACde,WAAW,CAAC,MAAM,CAAC,CACnBC,KAAK,CAAC,CAAE,MAAM,CAAE,EAAG,CAAC,CAAC,CACvB,CAAC,CAAE,CAACV,KAAK,CAACsB,MAAM,CAAC,CAAC,CAElB,mBACExB,KAAA,CAACN,aAAa,EACZe,OAAO,CAAEA,OAAQ,CACjBC,OAAO,CAAEA,OAAQ,CACjBe,UAAU,CAAE,CAACvB,KAAK,CAACwB,SAAS,CAAG,WAAW,CAAG,eAAgB,CAC7DC,QAAQ,CAAEtB,YAAY,CAACa,gBAAgB,CAAE,CACzCM,MAAM,CAAEtB,KAAK,CAACsB,MAAO,CACrBD,OAAO,CAAED,WAAY,CACrBM,KAAK,CAAC,uFAAiB,CACvBC,IAAI,CAAC,aAAa,CAAAC,QAAA,eAElBhC,IAAA,SAAAiC,aAAA,EAAOC,IAAI,CAAC,KAAK,CAACC,SAAS,CAAC,qCAAqC,CAACC,EAAE,CAAC,kBAAkB,CAACL,IAAI,CAAC,MAAM,CACjGM,WAAW,CAAC,oGAAoB,EAAKtB,YAAY,CAAG,CAAC,cACvDf,IAAA,SAAMoC,EAAE,CAAC,iBAAiB,CAACD,SAAS,uBAAAG,MAAA,CAAwB5B,MAAM,CAACa,IAAI,CAAG,2BAA2B,CAAG,EAAE,CAAG,CAAAS,QAAA,CAAEtB,MAAM,CAACa,IAAI,CAAGb,MAAM,CAACa,IAAI,CAACL,OAAO,CAAG,EAAE,CAAO,CAAC,EAChJ,CAAC,CAEpB"},"metadata":{},"sourceType":"module","externalDependencies":[]}