{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Roman\\\\dev\\\\react-mesto-api-full-gha\\\\frontend\\\\src\\\\components\\\\EditProfilePopup.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect } from \"react\";\nimport PopupWithForm from \"./PopupWithForm.jsx\";\nimport { CurrentUserContext } from '../../src/context/CurrentUserContext';\nimport { useForm } from 'react-hook-form';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditProfilePopup(props) {\n  _s();\n  const currentUser = useContext(CurrentUserContext);\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors,\n      isDirty,\n      isValid\n    },\n    clearErrors,\n    reset,\n    setValue\n  } = useForm({\n    mode: 'onChange'\n  });\n  const nameRegister = register('name', {\n    required: {\n      value: true,\n      message: 'Обязательное поле'\n    },\n    minLength: {\n      value: 2,\n      message: 'Минимальное число символов : 2'\n    },\n    maxLength: {\n      value: 40,\n      message: 'Максимальное число символов: 40'\n    }\n  });\n  const aboutRegister = register('about', {\n    required: {\n      value: true,\n      message: 'Обязательное поле'\n    },\n    minLength: {\n      value: 2,\n      message: 'Минимальное число символов : 2'\n    },\n    maxLength: {\n      value: 40,\n      message: 'Максимальное число символов: 200'\n    }\n  });\n  useEffect(() => {\n    reset();\n    setValue(\"name\", currentUser.name);\n    setValue(\"about\", currentUser.about);\n  }, [currentUser, props.isOpen]);\n  function handleSubmitForm(data) {\n    props.onUpdateUser({\n      name: data.name,\n      about: data.about\n    });\n  }\n  function handleClose() {\n    props.onClose();\n    clearErrors(['name', 'about']);\n  }\n  return /*#__PURE__*/_jsxDEV(PopupWithForm, {\n    buttonText: !props.isLoading ? 'Сохранить' : 'Сохранение...',\n    isDirty: isDirty,\n    isValid: isValid,\n    onSubmit: handleSubmit(handleSubmitForm),\n    title: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",\n    name: \"edit-profile\",\n    isOpen: props.isOpen,\n    onClose: handleClose,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"popup__input popup__input_type_name\",\n      id: \"user-name\",\n      name: \"name\",\n      placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u0438\\u043C\\u044F\",\n      ...nameRegister\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      id: \"card-link-error\",\n      className: `popup__input-error ${errors.name ? 'popup__input-error_active' : ''}`,\n      children: errors.name ? errors.name.message : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"popup__input popup__input_type_career\",\n      id: \"user-career\",\n      name: \"about\",\n      placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u043F\\u0440\\u0438\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",\n      ...aboutRegister\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      id: \"card-link-error\",\n      className: `popup__input-error ${errors.about ? 'popup__input-error_active' : ''}`,\n      children: errors.about ? errors.about.message : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n}\n_s(EditProfilePopup, \"s+1DK1UsKAWDFyC2P+lG4Gl4YjA=\", false, function () {\n  return [useForm];\n});\n_c = EditProfilePopup;\nvar _c;\n$RefreshReg$(_c, \"EditProfilePopup\");","map":{"version":3,"names":["React","useState","useContext","useEffect","PopupWithForm","CurrentUserContext","useForm","jsxDEV","_jsxDEV","EditProfilePopup","props","_s","currentUser","register","handleSubmit","formState","errors","isDirty","isValid","clearErrors","reset","setValue","mode","nameRegister","required","value","message","minLength","maxLength","aboutRegister","name","about","isOpen","handleSubmitForm","data","onUpdateUser","handleClose","onClose","buttonText","isLoading","onSubmit","title","children","type","className","id","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Roman/dev/react-mesto-api-full-gha/frontend/src/components/EditProfilePopup.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm.jsx\";\r\nimport { CurrentUserContext } from '../../src/context/CurrentUserContext';\r\nimport { useForm } from 'react-hook-form'\r\n\r\nexport default function EditProfilePopup(props) {\r\n\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    const {register, handleSubmit, formState:{ errors, isDirty, isValid }, clearErrors,reset, setValue} = useForm({mode: 'onChange'});\r\n\r\n    const nameRegister = register('name', {\r\n      required: {\r\n        value: true,\r\n        message: 'Обязательное поле'\r\n      },\r\n      minLength: {\r\n        value: 2,\r\n        message: 'Минимальное число символов : 2'\r\n      },\r\n      maxLength: {\r\n        value: 40,\r\n        message: 'Максимальное число символов: 40'\r\n      }\r\n    })\r\n\r\n    const aboutRegister = register('about', {\r\n        required: {\r\n            value: true,\r\n            message: 'Обязательное поле'\r\n          },\r\n          minLength: {\r\n            value: 2,\r\n            message: 'Минимальное число символов : 2'\r\n          },\r\n          maxLength: {\r\n            value: 40,\r\n            message: 'Максимальное число символов: 200'\r\n          }\r\n    })\r\n\r\n\r\n    useEffect(() => {\r\n        reset()\r\n        setValue(\"name\", currentUser.name)\r\n        setValue(\"about\", currentUser.about)\r\n    }, [currentUser, props.isOpen]);\r\n\r\n\r\n    function handleSubmitForm(data) {\r\n        props.onUpdateUser({\r\n            name: data.name,\r\n            about: data.about\r\n        });\r\n    }\r\n\r\n    function handleClose() {\r\n        props.onClose();\r\n        clearErrors(['name','about'])\r\n    }\r\n\r\n \r\n\r\n    return (\r\n        <PopupWithForm\r\n            buttonText={!props.isLoading ? 'Сохранить' : 'Сохранение...'}\r\n            isDirty={isDirty}\r\n            isValid={isValid}\r\n            onSubmit={handleSubmit(handleSubmitForm)}\r\n            title=\"Редактировать профиль\"\r\n            name=\"edit-profile\"\r\n            isOpen={props.isOpen}\r\n            onClose={handleClose}\r\n        >\r\n            <input type=\"text\" className=\"popup__input popup__input_type_name\" id=\"user-name\" name=\"name\"\r\n                placeholder=\"Введите ваше имя\" {...nameRegister} />\r\n            <span id=\"card-link-error\" className={`popup__input-error ${errors.name ? 'popup__input-error_active' : ''}`}>{errors.name ? errors.name.message: ''}</span>\r\n            <input type=\"text\" className=\"popup__input popup__input_type_career\" id=\"user-career\" name=\"about\"\r\n                placeholder=\"Введите ваше призвание\" {...aboutRegister} />\r\n            <span id=\"card-link-error\" className={`popup__input-error ${errors.about ? 'popup__input-error_active' : ''}`}>{errors.about ? errors.about.message: ''}</span>\r\n        </PopupWithForm>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}